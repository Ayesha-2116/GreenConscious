{% extends 'base.html' %}

{% block title %}My Events{% endblock %}

{% load static %}

{% block extra_css %}
<link rel="stylesheet" type="text/css" href="{% static 'MainPage/style.css' %}">
<style>
  * {
    box-sizing: border-box;
  }

  .container {
    width: 100%;
  }

  .left {
    width: 25%;
    padding: 10px;
    background-color: #ffffff;
    vertical-align: top;
    position: sticky;
    top: 0;
    height: fit-content;
  }

  .right {
    width: 75%;
    padding: 10px;
    background-color: #ffffff;
    vertical-align: top;
  }

  .search_button {
    width: 100%;
    display: block;
    margin-bottom: 10px;
  }

  .no-events-message {
    text-align: center;
    margin-top: 20px;
    font-style: italic;
    color: #999;
  }

  .event {
    margin-bottom: 20px;
  }

  .event img {
    max-width: 100%;
    height: auto;
  }

  .pagination {
    margin-top: 20px;
  }

  .pagination .step-links a {
    margin: 0 5px;
  }

  .pagination .current {
    margin: 0 5px;
  }
</style>
{% endblock %}

{% block navbar-content %}
    <a href="{% url 'MainPage:main_page' %}">
        <div class="name">Green Conscious</div>
    </a>
    <div class="login-register">
        <a href="{% url 'Login_SignUp:profile_view' %}">
            <button>My Profile</button>
        </a>
        <a href="{% url 'Login_SignUp:logoutPage' %}">
            <button>Log Out</button>
        </a>
    </div>
{% endblock %}

{% block content %}
<div class="container">
  <table style="width: 100%; border-spacing: 20px;">
    <tr>
      <td class="left">
        <button onclick="location.href='{% url 'EventsPage:event_creation' %}'" class="search_button text-center">Create Event</button>
        <button onclick="location.href='{% url 'MainPage:main_page' %}'" class="search_button text-center">Upcoming Events</button>
        <button onclick="location.href='{% url 'MainPage:past_events' %}'" class="search_button text-center">Past Events</button>
        <button onclick="location.href='{% url 'volunteer_matching' %}'" class="search_button text-center">Find events you'd like</button>
        <button onclick="location.href='{% url 'community_page' %}'" class="search_button text-center">Community</button>
      </td>

      <td class="right">
        {% if eventsToDisplay %}
          <h1>Created Events</h1>
          {% if eventsCreated %}
            {% for event in eventsCreated %}
              <div class="event">
                <h2><a href="{% url 'MainPage:event_detail' event.id %}">{{ event.name }}</a></h2>
                <p><strong>Start Date:</strong> {{ event.start_date }}</p>
                <p><strong>End Date:</strong> {{ event.end_date }}</p>
                <p><strong>Description:</strong> {{ event.description }}</p>
                {% if event.image %}
                  <img src="{{ event.image.url }}" alt="{{ event.name }}">
                {% endif %}
                <p><strong>Category:</strong> {{ event.category }}</p>
                <p><strong>Location:</strong> {{ event.location }}</p>
                <p><strong>Created By:</strong> {{ event.created_by.username }}</p>
              </div>
            {% endfor %}
          {% else %}
            <p class="no-events-message">No events found.</p>
          {% endif %}

          <h1>Registered Events</h1>
          {% if eventsRegistered %}
            {% for regEvent in eventsRegistered %}
              <div class="event">
                <h2><a href="{% url 'MainPage:event_detail' regEvent.event.id %}">{{ regEvent.event.name }}</a></h2>
                <p><strong>Start Date:</strong> {{ regEvent.event.start_date }}</p>
                <p><strong>End Date:</strong> {{ regEvent.event.end_date }}</p>
                <p><strong>Description:</strong> {{ regEvent.event.description }}</p>
                {% if regEvent.event.image %}
                  <img src="{{ regEvent.event.image.url }}" alt="{{ regEvent.event.name }}">
                {% endif %}
                <p><strong>Category:</strong> {{ regEvent.event.category }}</p>
                <p><strong>Location:</strong> {{ regEvent.event.location }}</p>
                <p><strong>Created By:</strong> {{ regEvent.event.created_by.username }}</p>
              </div>
            {% endfor %}
          {% else %}
            <p class="no-events-message">No events found.</p>
          {% endif %}
        {% else %}
          <p class="no-events-message">No events found.</p>
        {% endif %}
      </td>
    </tr>
  </table>
</div>
{% endblock %}
